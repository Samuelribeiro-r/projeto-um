<%- include('../partials/header') %>

<main class="container text-center mt-3">
  <h1>LISTA DE PRODUTO</h1>
  <a href="/produtos/cadastrar">
    <button class="btn btn-lg btn-primary mt-2 mb-4">
      <i class="bi bi-plus-circle"></i>
      Cadastrar
    </button>
  </a>

  <div class="d-flex flex-row flex-wrap gap-3 justify-content-center mb-5">
    <% if (produtos && produtos.length > 0) { %> <% produtos.forEach(produto =>
    { %>
    <div class="card border-light" style="width: 18rem">
      <img
        src="<%= produto.imagem %>"
        class="card-img-top"
        alt="imagem do produto"
        width="600px"
        height="260px"
      />
      <div class="card-body text-start text-bg-dark bg-dark">
        <h5 class="card-title fs-3" style="color: rgb(255, 255, 255)">
          <%= produto.nome %>
        </h5>
        <p class="card-text"><b>Preço:</b> R$ <%= produto.preco %></p>
        <p class="card-text"><b>Descrição:</b> <%= produto.descricao %></p>
        <p class="card-text"><b>Tipo:</b> <%= produto.categoria %></p>
        <p class="card-text"><b>Quantidade:</b> <%= produto.quantidade %></p>
      </div>

      <div class="card-footer d-flex justify-content-center bg-dark">
        <a href="/produtos/<%= produto.id %> " style="text-decoration: none">
          <button class="btn btn-sm btn-warning me-2">
            <i class="bi bi-pencil-square"></i>
            Editar
          </button>
        </a>

        <button
          class="btn btn-sm btn-danger"
          onclick="confirmaExclusao('<%= produto.nome %>', '<%= produto.id %>')"
        >
          <i class="bi bi-trash"></i>
          Excluir
        </button>
      </div>
    </div>
    <% }) %> <% } else { %>

    <div class="alert alert-warning text-center mt-5">
      Nenhum produto cadastrado.
    </div>
    <% } %>

    <script>
      function confirmaExclusao(nomeProduto, id) {
        if (confirm(`Confirma a exclusão do produto: ${nomeProduto} `)) {
          window.location.href = `/produtos/deletar/${id}`;
        }
      }
    </script>
  </div>
</main>

<%- include('../partials/footer') %>
